<div class="container">
  <div class="panel panel-default">
    <div class="panel-heading">
      <ul class="nav nav-tabs">
        <li class="disabled"><a>Client</a></li>
        <li ng-class="{active: $ctrl.activeTab === 'get'}"><a href="" ng-click="$ctrl.activeTab = 'get'">Get</a></li>
        <li ng-class="{active: $ctrl.activeTab === 'setValue'}"><a href="" ng-click="$ctrl.activeTab = 'setValue'">Set Value</a></li>
        <li ng-class="{active: $ctrl.activeTab === 'set'}"><a href="" ng-click="$ctrl.activeTab = 'set'">Set</a></li>
        <li ng-class="{active: $ctrl.activeTab === 'call'}"><a href="" ng-click="$ctrl.activeTab = 'call'">Call</a></li>
      </ul>
    </div>
    <div class="panel-body">
      <form name="falcorClientForm" id="falcorClientForm">
        <div ng-if="$ctrl.activeTab === 'get'">
          <div class="form-group">
            <label for="paths">
              Paths
              <button class="btn btn-link btn-xs" type="button" ng-click="$ctrl.addPath()">
                Add one
              </button>
            </label>
            <div ng-repeat="path in $ctrl.paths track by $index" ng-class="{'input-group' : $ctrl.paths.length !== 1}">
              <input
                ng-model="$ctrl.paths[$index]"
                required
                id="paths"
                class="form-control"
                placeholder="a.b['id', 'name']">
              <div class="input-group-btn" ng-if="$ctrl.paths.length !== 1">
                <button class="btn btn-link" type="button" ng-click="$ctrl.deletePath($index)">
                  Remove this
                </button>
              </div>
            </div>
          </div>
          <button
            ladda="$ctrl.get($ctrl.paths)"
            ng-disabled="falcorClientForm.$invalid"
            type="submit"
            class="btn btn-info">
            Get
          </button>
          <button
            ng-click="$ctrl.invalidate($ctrl.paths)"
            ng-disabled="falcorClientForm.$invalid"
            type="submit"
            class="btn btn-link">
            Invalidate cache
          </button>
        </div>
        <div ng-if="$ctrl.activeTab === 'setValue'">
          <div class="form-group">
            <label for="paths">
              Path
            </label>
            <div>
              <input
                ng-model="$ctrl.paths[0]"
                required
                id="paths"
                class="form-control"
                placeholder="a.b.c">
            </div>
          </div>
          <div class="form-group">
            <label for="args">Arguments</label>
            <input
              ng-model="$ctrl.args"
              id="args"
              class="form-control"
              placeholder='New Value'>
          </div>
          <button
            ladda="$ctrl.setValue($ctrl.paths[0], $ctrl.args)"
            ng-disabled="falcorClientForm.$invalid"
            type="submit"
            class="btn btn-warning">
            Set
          </button>
        </div>
        <div ng-if="$ctrl.activeTab === 'set'">
          <div class="form-group">
            <label for="paths">
              Update
            </label>
            <div>
              <textarea
                ng-model="$ctrl.paths[0]"
                required
                id="paths"
                class="form-control"
                placeholder='{"a": 1, "b": {"c": 2}}'>
              </textarea>
            </div>
          </div>
          <button
            ladda="$ctrl.set($ctrl.paths[0])"
            ng-disabled="falcorClientForm.$invalid"
            type="submit"
            class="btn btn-warning">
            Set
          </button>
        </div>
        <div ng-if="$ctrl.activeTab === 'call'">
          <div class="form-group">
            <label for="paths">
              Path
            </label>
            <div ng-repeat="path in $ctrl.paths track by $index" ng-class="{'input-group' : $ctrl.paths.length !== 1}">
              <input
                ng-model="$ctrl.paths[$index]"
                required
                id="paths"
                class="form-control"
                placeholder="a.b.do">
            </div>
          </div>
          <div class="form-group">
            <label for="args">Arguments</label>
            <input
              ng-model="$ctrl.args"
              id="args"
              class="form-control"
              placeholder='["id", "name"]'>
          </div>
          <div class="form-group">
            <label for="refPaths">'ref' Paths</label>
            <input
              ng-model="$ctrl.refPaths"
              id="refPaths"
              class="form-control"
              placeholder="a.b['id', 'name']">
          </div>
          <div class="form-group">
            <label for="thisPaths">'this' Paths</label>
            <input
              ng-model="$ctrl.thisPaths"
              id="thisPaths"
              class="form-control"
              placeholder="a.b['id', 'name']">
          </div>
            <button
              ladda="$ctrl.call($ctrl.paths[0], $ctrl.args, $ctrl.refPaths, $ctrl.thisPaths)"
              ng-disabled="falcorClientForm.$invalid"
              type="submit"
              class="btn btn-danger">
              Call
            </button>
        </div>
      </form>
    </div>
    <div ng-show="$ctrl.response" class="falcor-client-response">
      <pre ng-class="{'text-danger': $ctrl.error}">{{$ctrl.response | json}}</pre>
    </div>
  </div>
</div>
